<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dual Display Billboard: src/dcc_manager.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Dual Display Billboard<span id="projectnumber">&#160;v0.9</span>
   </div>
   <div id="projectbrief">ESP32-based dual display billboard system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dcc__manager_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">dcc_manager.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Digital Command Control (DCC) interface implementation for model railway integration.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="dcc__manager_8h_source.html">dcc_manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="settings__manager_8h_source.html">settings_manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="slideshow__manager_8h_source.html">slideshow_manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logger_8h_source.html">logger.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dcc_manager.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="dcc__manager_8cpp__incl.png" border="0" usemap="#asrc_2dcc__manager_8cpp" alt=""/></div>
<map name="asrc_2dcc__manager_8cpp" id="asrc_2dcc__manager_8cpp">
<area shape="rect" title="Digital Command Control (DCC) interface implementation for model railway integration." alt="" coords="1196,5,1355,31"/>
<area shape="rect" href="dcc__manager_8h.html" title="Digital Command Control (DCC) interface for model railway integration." alt="" coords="1342,79,1462,104"/>
<area shape="poly" title=" " alt="" coords="1297,28,1371,69,1368,74,1295,33"/>
<area shape="rect" href="settings__manager_8h.html" title="Comprehensive configuration persistence and management system for ESP32 dual display billboard." alt="" coords="1116,152,1267,177"/>
<area shape="poly" title=" " alt="" coords="1271,32,1207,141,1203,139,1266,30"/>
<area shape="rect" href="logger_8h.html" title="Hierarchical logging system with build&#45;time optimization for ESP32 dual display billboard." alt="" coords="1144,225,1218,251"/>
<area shape="poly" title=" " alt="" coords="1282,30,1290,58,1296,96,1295,138,1290,159,1282,179,1259,204,1231,222,1228,217,1256,200,1277,176,1285,158,1290,138,1291,97,1285,59,1277,32"/>
<area shape="rect" href="slideshow__manager_8h.html" title="Advanced image slideshow system with clock integration for dual display billboard." alt="" coords="882,79,1045,104"/>
<area shape="poly" title=" " alt="" coords="1226,33,1028,78,1027,73,1225,28"/>
<area shape="rect" title=" " alt="" coords="582,372,666,397"/>
<area shape="poly" title=" " alt="" coords="1400,106,1378,149,1341,211,1289,275,1258,303,1223,326,1178,344,1117,357,965,375,806,384,679,386,679,381,806,378,965,370,1116,352,1177,339,1221,322,1255,299,1286,271,1337,208,1374,147,1395,103"/>
<area shape="rect" title=" " alt="" coords="1395,152,1490,177"/>
<area shape="poly" title=" " alt="" coords="1411,103,1431,139,1427,141,1407,106"/>
<area shape="poly" title=" " alt="" coords="1210,175,1234,196,1253,224,1258,242,1257,259,1253,273,1244,286,1217,308,1183,326,1141,341,1085,354,945,371,798,381,680,385,679,380,798,375,944,366,1084,348,1140,336,1181,322,1214,303,1240,282,1248,271,1252,258,1252,243,1248,226,1230,199,1207,179"/>
<area shape="rect" title=" " alt="" coords="1061,299,1144,324"/>
<area shape="poly" title=" " alt="" coords="1206,176,1219,191,1232,210,1238,231,1233,252,1218,270,1199,284,1158,302,1156,297,1196,279,1214,266,1228,249,1232,231,1227,212,1215,194,1202,179"/>
<area shape="poly" title=" " alt="" coords="1192,178,1187,212,1182,211,1187,177"/>
<area shape="rect" href="clock__types_8h.html" title="Clock face type definitions for dual display billboard system." alt="" coords="622,225,732,251"/>
<area shape="poly" title=" " alt="" coords="1116,178,746,228,746,223,1116,173"/>
<area shape="poly" title=" " alt="" coords="1184,251,1179,288,1171,309,1157,326,1131,337,1084,347,952,364,679,383,679,378,952,358,1084,342,1129,332,1154,322,1166,306,1174,287,1179,250"/>
<area shape="poly" title=" " alt="" coords="1170,253,1127,291,1123,288,1166,249"/>
<area shape="poly" title=" " alt="" coords="882,97,715,103,508,113,309,130,227,141,166,155,85,176,56,194,28,227,15,253,9,277,12,299,27,322,54,335,105,347,257,364,429,374,568,379,568,385,428,380,257,369,105,352,52,340,23,326,7,301,3,276,10,251,24,224,52,190,83,171,164,149,226,136,308,125,507,108,715,97,882,92"/>
<area shape="poly" title=" " alt="" coords="1001,101,1142,145,1141,150,999,107"/>
<area shape="poly" title=" " alt="" coords="979,102,1030,152,1059,186,1083,224,1095,255,1102,284,1097,285,1090,256,1079,227,1055,189,1026,155,976,106"/>
<area shape="poly" title=" " alt="" coords="982,102,1154,215,1151,220,980,106"/>
<area shape="rect" title=" " alt="" coords="684,152,747,177"/>
<area shape="poly" title=" " alt="" coords="924,107,761,153,759,148,923,101"/>
<area shape="rect" title=" " alt="" coords="938,152,989,177"/>
<area shape="poly" title=" " alt="" coords="966,104,966,138,961,138,961,104"/>
<area shape="rect" href="image__manager_8h.html" title="Manages JPEG image storage, validation, and display for dual TFT displays." alt="" coords="772,152,910,177"/>
<area shape="poly" title=" " alt="" coords="945,106,874,147,871,143,943,102"/>
<area shape="rect" href="display__clock__manager_8h.html" title="Professional clock display system with multiple face styles for dual display billboard." alt="" coords="177,152,364,177"/>
<area shape="poly" title=" " alt="" coords="882,104,377,155,377,150,882,98"/>
<area shape="poly" title=" " alt="" coords="778,180,667,203,622,216,600,227,597,236,597,246,607,270,627,298,631,329,630,358,625,358,626,330,622,300,602,272,592,248,591,235,596,224,620,211,666,198,777,175"/>
<area shape="poly" title=" " alt="" coords="781,180,675,204,632,216,611,227,606,238,611,249,632,260,673,270,793,286,931,298,1047,305,1047,310,931,303,793,291,672,275,630,265,607,252,601,238,607,224,630,211,674,199,780,175"/>
<area shape="poly" title=" " alt="" coords="896,175,1131,224,1130,229,895,180"/>
<area shape="rect" title=" " alt="" coords="946,225,1069,251"/>
<area shape="poly" title=" " alt="" coords="869,175,969,217,967,222,867,180"/>
<area shape="rect" title=" " alt="" coords="757,225,922,251"/>
<area shape="poly" title=" " alt="" coords="843,178,843,212,837,212,838,178"/>
<area shape="rect" href="display__manager_8h.html" title="Hardware abst // Hardware pin definitions &#45; platform specific #if defined(ESP32S3_MODE) ESP32&#45;S3 pino..." alt="" coords="198,225,343,251"/>
<area shape="poly" title=" " alt="" coords="772,178,759,180,357,228,357,223,758,175,771,173"/>
<area shape="poly" title=" " alt="" coords="255,253,236,268,219,286,211,305,212,314,216,322,240,339,275,353,320,363,370,371,477,379,568,381,568,387,476,384,370,376,319,368,274,358,237,344,212,326,206,315,206,304,215,283,232,264,251,249"/>
<area shape="rect" title=" " alt="" coords="59,299,151,324"/>
<area shape="poly" title=" " alt="" coords="245,253,145,296,143,291,243,248"/>
<area shape="rect" href="display__hardware__config_8h.html" title="Centralized hardware pin configuration for dual TFT displays." alt="" coords="226,299,421,324"/>
<area shape="poly" title=" " alt="" coords="281,249,309,286,305,289,277,253"/>
<area shape="poly" title=" " alt="" coords="187,180,103,199,69,212,48,227,33,252,28,276,33,299,48,322,74,335,123,346,269,363,433,374,568,379,568,384,433,379,268,368,123,351,72,340,44,326,28,301,23,275,28,250,44,224,66,207,101,194,186,175"/>
<area shape="poly" title=" " alt="" coords="336,175,609,222,608,227,335,180"/>
<area shape="poly" title=" " alt="" coords="273,178,273,212,268,212,268,178"/>
<area shape="poly" title=" " alt="" coords="253,180,187,227,125,290,122,286,183,223,250,175"/>
<area shape="rect" title=" " alt="" coords="58,225,122,251"/>
<area shape="poly" title=" " alt="" coords="242,180,133,223,131,218,240,175"/>
<area shape="rect" href="time__manager_8h.html" title="Professional time management system for ESP32 dual display billboard." alt="" coords="368,225,496,251"/>
<area shape="poly" title=" " alt="" coords="297,175,394,217,392,222,295,180"/>
<area shape="poly" title=" " alt="" coords="497,245,551,263,577,278,600,297,617,327,625,358,619,359,613,329,596,300,574,282,549,268,495,250"/>
<area shape="poly" title=" " alt="" coords="496,243,1047,302,1047,307,496,249"/>
<area shape="rect" href="timezone__config_8h.html" title="User&#45;configurable timezone definitions for the dual display billboard system." alt="" coords="445,299,586,324"/>
<area shape="poly" title=" " alt="" coords="447,249,493,287,489,292,443,253"/>
<area shape="poly" title=" " alt="" coords="534,322,596,362,593,367,531,326"/>
</map>
</div>
</div>
<p><a href="dcc__manager_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4af9358dcaf3dfa6574935fd1eef5883" id="r_a4af9358dcaf3dfa6574935fd1eef5883"><td class="memItemLeft" align="right" valign="top"><a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc__manager_8cpp.html#a4af9358dcaf3dfa6574935fd1eef5883">notifyDccAccTurnoutOutput</a> (<a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">uint16_t</a> <a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">Addr</a>, <a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">uint8_t</a> <a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">Direction</a>, <a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">uint8_t</a> <a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">OutputPower</a>)</td></tr>
<tr class="memdesc:a4af9358dcaf3dfa6574935fd1eef5883"><td class="mdescLeft">&#160;</td><td class="mdescRight">C-compatible callback function required by NmraDcc library.  <br /></td></tr>
<tr class="separator:a4af9358dcaf3dfa6574935fd1eef5883"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Digital Command Control (DCC) interface implementation for model railway integration. </p>
<p>This module implements a DCC accessory decoder that integrates the dual display billboard with model railway DCC control systems. It provides seamless switching between gallery slideshow and clock display modes based on DCC turnout commands.</p>
<p>Features:</p><ul>
<li>Standard DCC accessory decoder protocol compliance using NmraDcc library</li>
<li>Configurable DCC address (1-2048) with address validation and filtering</li>
<li>Configurable GPIO pin for DCC signal input with internal pull-up configuration</li>
<li>Automatic display mode switching: Direction 0 = Gallery, Direction 1 = Clock</li>
<li>Real-time configuration updates with automatic settings persistence</li>
<li>Robust error handling and comprehensive logging for debugging</li>
<li>Static callback integration required by NmraDcc C library constraints</li>
</ul>
<p>Technical Implementation:</p><ul>
<li>Uses NmraDcc library for reliable DCC signal decoding and protocol compliance</li>
<li>Implements singleton pattern for C callback integration requirements</li>
<li>Provides immediate configuration persistence through <a class="el" href="classSettingsManager.html" title="Comprehensive configuration persistence and management system with hardware integration.">SettingsManager</a></li>
<li>Coordinates with <a class="el" href="classSlideshowManager.html" title="Advanced image slideshow system with clock integration.">SlideshowManager</a> for seamless display mode transitions</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Dual Display Billboard Project </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.9 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>August 2025 </dd></dl>

<p class="definition">Definition in file <a class="el" href="dcc__manager_8cpp_source.html">dcc_manager.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4af9358dcaf3dfa6574935fd1eef5883" name="a4af9358dcaf3dfa6574935fd1eef5883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4af9358dcaf3dfa6574935fd1eef5883">&#9670;&#160;</a></span>notifyDccAccTurnoutOutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">void</a> notifyDccAccTurnoutOutput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">uint16_t</a>&#160;</td>
          <td class="paramname"><em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">uint8_t</a>&#160;</td>
          <td class="paramname"><em>Direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="display__timing__config_8h.html#afa59a52df406c063f1adb7a5a3969dd1">uint8_t</a>&#160;</td>
          <td class="paramname"><em>OutputPower</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>C-compatible callback function required by NmraDcc library. </p>
<p>NmraDcc library requires a C-style callback function that cannot be a class member. This external C function routes callbacks to our static class method. </p>

<p class="definition">Definition at line <a class="el" href="dcc__manager_8cpp_source.html#l00375">375</a> of file <a class="el" href="dcc__manager_8cpp_source.html">dcc_manager.cpp</a>.</p>

<p class="reference">References <a class="el" href="display__timing__config_8h_source.html#l00025">DISPLAY_SPLASH_DURATION_MS</a>, and <a class="el" href="dcc__manager_8cpp_source.html#l00355">DCCManager::notifyDccAccTurnoutOutput()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dcc__manager_8cpp.html">dcc_manager.cpp</a></li>
    <li class="footer">Generated on Mon Aug 18 2025 15:00:12 for Dual Display Billboard by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
