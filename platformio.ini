[env]
platform = espressif32
board = wemos_d1_mini32
framework = arduino
monitor_speed = 115200
lib_deps = 
    esphome/ESPAsyncWebServer-esphome @ ^3.4.0
    esphome/ESPAsyncTCP-esphome @ ^2.0.0
    bodmer/TFT_eSPI @ ^2.5.43
    bodmer/TJpg_Decoder @ ^1.1.0
    mrrwa/NmraDcc @ ^2.0.17
board_build.filesystem = littlefs
board_build.partitions = tools/ESP32_4MB_1MB_FS.csv
monitor_filters = 
    esp32_exception_decoder
    time
    log2file
extra_scripts = 
    pre:tools/generate_splash_screen.py
    pre:tools/generate_build_info.py
    pre:tools/minify.py
    post:tools/rename_firmware.py

[platformio]
default_envs = esp32dev-st7735-debug

[env:esp32dev-st7735-debug]
upload_port = /dev/cu.usbserial-1110
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DLOGGER_ENABLED=1
    -DLOGGER_LEVEL_ERROR=1
    -DLOGGER_LEVEL_WARN=1
    -DLOGGER_LEVEL_INFO=1
    -DLOGGER_LEVEL_DEBUG=0
    -DLOGGER_LEVEL_VERBOSE=0
    -DDISPLAY_TYPE_ST7735
    -DDUAL_DISPLAY_ENABLED
    -DESP32DEV_MODE=1
    ; Working TFT configuration
    -DUSER_SETUP_LOADED=1
    -DST7735_DRIVER
    -DST7735_GREENTAB160x80
    -DTFT_WIDTH=80
    -DTFT_HEIGHT=160
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=23
    -DTFT_SCLK=18
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=27000000

[env:esp32dev-st7735-production]
upload_port = /dev/cu.usbserial-1110
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DLOGGER_ENABLED=0
    -DDISPLAY_TYPE_ST7735
    -DDUAL_DISPLAY_ENABLED
    -DESP32DEV_MODE=1
    ; Working TFT configuration
    -DUSER_SETUP_LOADED=1
    -DST7735_DRIVER
    -DST7735_GREENTAB160x80
    -DTFT_WIDTH=80
    -DTFT_HEIGHT=160
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=23
    -DTFT_SCLK=18
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=27000000

; ST7789 Display Configuration (240x240)
[env:esp32dev-st7789-debug]
upload_port = /dev/cu.usbserial-1110
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DLOGGER_ENABLED=1
    -DLOGGER_LEVEL_ERROR=1
    -DLOGGER_LEVEL_WARN=1
    -DLOGGER_LEVEL_INFO=1
    -DLOGGER_LEVEL_DEBUG=0
    -DLOGGER_LEVEL_VERBOSE=0
    -DDISPLAY_TYPE_ST7789
    -DDUAL_DISPLAY_ENABLED
    -DESP32DEV_MODE=1
    ; ST7789 TFT configuration
    -DUSER_SETUP_LOADED=1
    -DST7789_DRIVER
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=240
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=23
    -DTFT_SCLK=18
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=27000000

[env:esp32dev-st7789-production]
upload_port = /dev/cu.usbserial-1110
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DLOGGER_ENABLED=0
    -DDISPLAY_TYPE_ST7789
    -DDUAL_DISPLAY_ENABLED
    -DESP32DEV_MODE=1
    ; ST7789 TFT configuration
    -DUSER_SETUP_LOADED=1
    -DST7789_DRIVER
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=240
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=23
    -DTFT_SCLK=18
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=27000000

; ðŸ”¥ðŸš€ ESP32-S3 FINAL ENVIRONMENTS ðŸš€ðŸ”¥
; Clean, production-ready ESP32-S3 configurations

[env:esp32s3-st7735-debug] 
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
upload_speed = 460800
monitor_speed = 115200
board_build.partitions = tools/ESP32S3_8MB_1MB_FS.csv
; ESP32-S3-N8R2 specific PSRAM configuration (2MB PSRAM)
board_build.arduino.memory_type = qio_qspi
board_build.psram_type = qspi
board_build.arduino.stack_size = 8192
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
build_flags = 
    -DCORE_DEBUG_LEVEL=1
    -DLOGGER_ENABLED=1
    -DLOGGER_LEVEL_ERROR=1
    -DLOGGER_LEVEL_WARN=1
    -DLOGGER_LEVEL_INFO=1
    -DLOGGER_LEVEL_DEBUG=0
    -DLOGGER_LEVEL_VERBOSE=0
    -DDISPLAY_TYPE_ST7735
    -DDUAL_DISPLAY_ENABLED
    -DESP32S3_MODE=1
    -DBOARD_HAS_PSRAM
    ; ESP32-S3-N8R2 specific PSRAM flags (2MB PSRAM)
    -DCONFIG_ESP32S3_SPIRAM_SUPPORT=1
    -DCONFIG_SPIRAM_MODE_QUAD=1
    -DCONFIG_SPIRAM=1
    -DCONFIG_SPIRAM_USE_CAPS_ALLOC=1
    -DCONFIG_SPIRAM_IGNORE_NOTFOUND=1
    -DCONFIG_SPIRAM_TYPE_ESPPSRAM64=1
    ; ESP32-S3 specific pinout
    -DUSER_SETUP_LOADED=1
    -DST7735_DRIVER
    -DST7735_GREENTAB160x80
    -DTFT_WIDTH=80
    -DTFT_HEIGHT=160
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=11
    -DTFT_SCLK=12
    -DTFT_MISO=13
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=80000000
    ; PSRAM Features ðŸ’ª (2MB PSRAM for N8R2)
    -DPROJECT_PSRAM_ENABLE=1
    -DPSRAM_BUFFER_SIZE=524288
    -DENABLE_SPRITE_BUFFERING=1
    -DENABLE_ADVANCED_GRAPHICS=1
lib_deps = 
    bodmer/TFT_eSPI@^2.5.43
    bodmer/TJpg_Decoder@^1.1.0
    mrrwa/NmraDcc@^2.0.17
    esphome/ESPAsyncWebServer-esphome@^3.4.0
    esphome/ESPAsyncTCP-esphome@^2.0.0
extra_scripts = 
    pre:tools/minify.py
    post:tools/rename_firmware.py

[env:esp32s3-st7735-production]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
upload_speed = 460800
monitor_speed = 115200
board_build.partitions = tools/ESP32S3_8MB_1MB_FS.csv
; ESP32-S3-N8R2 specific PSRAM configuration (2MB PSRAM)
board_build.arduino.memory_type = qio_qspi
board_build.psram_type = qspi
board_build.arduino.stack_size = 8192
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DLOGGER_ENABLED=0
    -DLOGGER_LEVEL_ERROR=0
    -DLOGGER_LEVEL_WARN=0
    -DLOGGER_LEVEL_INFO=0
    -DLOGGER_LEVEL_DEBUG=0
    -DLOGGER_LEVEL_VERBOSE=0
    -DDISPLAY_TYPE_ST7735
    -DDUAL_DISPLAY_ENABLED
    -DESP32S3_MODE=1
    -DBOARD_HAS_PSRAM
    ; Force PSRAM detection for N8R2 module with 2MB PSRAM
    -DCONFIG_ESP32S3_SPIRAM_SUPPORT=1
    -DCONFIG_SPIRAM_MODE_QUAD=1
    -DCONFIG_SPIRAM=1
    -DCONFIG_SPIRAM_USE_CAPS_ALLOC=1
    -DCONFIG_SPIRAM_IGNORE_NOTFOUND=1
    -DCONFIG_SPIRAM_TYPE_ESPPSRAM64=1
    ; ESP32-S3 specific pinout
    -DUSER_SETUP_LOADED=1
    -DST7735_DRIVER
    -DST7735_GREENTAB160x80
    -DTFT_WIDTH=80
    -DTFT_HEIGHT=160
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=11
    -DTFT_SCLK=12
    -DTFT_MISO=13
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=80000000
    ; PSRAM Beast Features ðŸ’ª (2MB PSRAM for N8R2)
    -DPROJECT_PSRAM_ENABLE=1
    -DPSRAM_BUFFER_SIZE=524288
    -DENABLE_SPRITE_BUFFERING=1
    -DENABLE_ADVANCED_GRAPHICS=1
lib_deps = 
    bodmer/TFT_eSPI@^2.5.43
    bodmer/TJpg_Decoder@^1.1.0
    mrrwa/NmraDcc@^2.0.17
    esphome/ESPAsyncWebServer-esphome@^3.4.0
    esphome/ESPAsyncTCP-esphome@^2.0.0
extra_scripts = 
    pre:tools/minify.py
    post:tools/rename_firmware.py

; ðŸ”¥ðŸš€ ESP32-S3 ST7789 ENVIRONMENTS ðŸš€ðŸ”¥
; Complete ESP32-S3 configurations for ST7789 240x240 displays

[env:esp32s3-st7789-debug] 
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
upload_speed = 460800
monitor_speed = 115200
board_build.partitions = tools/ESP32S3_8MB_1MB_FS.csv
; ESP32-S3-N8R2 specific PSRAM configuration (2MB PSRAM)
board_build.arduino.memory_type = qio_qspi
board_build.psram_type = qspi
board_build.arduino.stack_size = 8192
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
build_flags = 
    -DCORE_DEBUG_LEVEL=1
    -DLOGGER_ENABLED=1
    -DLOGGER_LEVEL_ERROR=1
    -DLOGGER_LEVEL_WARN=1
    -DLOGGER_LEVEL_INFO=1
    -DLOGGER_LEVEL_DEBUG=0
    -DLOGGER_LEVEL_VERBOSE=0
    -DDISPLAY_TYPE_ST7789
    -DDUAL_DISPLAY_ENABLED
    -DESP32S3_MODE=1
    -DBOARD_HAS_PSRAM
    ; ESP32-S3-N8R2 specific PSRAM flags (2MB PSRAM)
    -DCONFIG_ESP32S3_SPIRAM_SUPPORT=1
    -DCONFIG_SPIRAM_MODE_QUAD=1
    -DCONFIG_SPIRAM=1
    -DCONFIG_SPIRAM_USE_CAPS_ALLOC=1
    -DCONFIG_SPIRAM_IGNORE_NOTFOUND=1
    -DCONFIG_SPIRAM_TYPE_ESPPSRAM64=1
    ; ESP32-S3 specific pinout for ST7789
    -DUSER_SETUP_LOADED=1
    -DST7789_DRIVER
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=240
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=11
    -DTFT_SCLK=12
    -DTFT_MISO=13
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=80000000
    ; PSRAM Features ðŸ’ª (2MB PSRAM for N8R2)
    -DPROJECT_PSRAM_ENABLE=1
    -DPSRAM_BUFFER_SIZE=524288
    -DENABLE_SPRITE_BUFFERING=1
    -DENABLE_ADVANCED_GRAPHICS=1
lib_deps = 
    bodmer/TFT_eSPI@^2.5.43
    bodmer/TJpg_Decoder@^1.1.0
    mrrwa/NmraDcc@^2.0.17
    esphome/ESPAsyncWebServer-esphome@^3.4.0
    esphome/ESPAsyncTCP-esphome@^2.0.0
extra_scripts = 
    pre:tools/minify.py
    post:tools/rename_firmware.py

[env:esp32s3-st7789-production]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
upload_speed = 460800
monitor_speed = 115200
board_build.partitions = tools/ESP32S3_8MB_1MB_FS.csv
; ESP32-S3-N8R2 specific PSRAM configuration (2MB PSRAM)
board_build.arduino.memory_type = qio_qspi
board_build.psram_type = qspi
board_build.arduino.stack_size = 8192
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DLOGGER_ENABLED=0
    -DLOGGER_LEVEL_ERROR=0
    -DLOGGER_LEVEL_WARN=0
    -DLOGGER_LEVEL_INFO=0
    -DLOGGER_LEVEL_DEBUG=0
    -DLOGGER_LEVEL_VERBOSE=0
    -DDISPLAY_TYPE_ST7789
    -DDUAL_DISPLAY_ENABLED
    -DESP32S3_MODE=1
    -DBOARD_HAS_PSRAM
    ; Force PSRAM detection for N8R2 module with 2MB PSRAM
    -DCONFIG_ESP32S3_SPIRAM_SUPPORT=1
    -DCONFIG_SPIRAM_MODE_QUAD=1
    -DCONFIG_SPIRAM=1
    -DCONFIG_SPIRAM_USE_CAPS_ALLOC=1
    -DCONFIG_SPIRAM_IGNORE_NOTFOUND=1
    -DCONFIG_SPIRAM_TYPE_ESPPSRAM64=1
    ; ESP32-S3 specific pinout for ST7789
    -DUSER_SETUP_LOADED=1
    -DST7789_DRIVER
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=240
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=11
    -DTFT_SCLK=12
    -DTFT_MISO=13
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=80000000
    ; PSRAM Beast Features ðŸ’ª (2MB PSRAM for N8R2)
    -DPROJECT_PSRAM_ENABLE=1
    -DPSRAM_BUFFER_SIZE=524288
    -DENABLE_SPRITE_BUFFERING=1
    -DENABLE_ADVANCED_GRAPHICS=1
lib_deps = 
    bodmer/TFT_eSPI@^2.5.43
    bodmer/TJpg_Decoder@^1.1.0
    mrrwa/NmraDcc@^2.0.17
    esphome/ESPAsyncWebServer-esphome@^3.4.0
    esphome/ESPAsyncTCP-esphome@^2.0.0
extra_scripts = 
    pre:tools/minify.py
    post:tools/rename_firmware.py
