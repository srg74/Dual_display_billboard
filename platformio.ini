[env]
platform = espressif32
board = wemos_d1_mini32
framework = arduino
monitor_speed = 115200
lib_deps = 
    esphome/ESPAsyncWebServer-esphome @ ^3.4.0
    esphome/ESPAsyncTCP-esphome @ ^2.0.0
    bodmer/TFT_eSPI @ ^2.5.43
    bodmer/TJpg_Decoder @ ^1.1.0
    mrrwa/NmraDcc @ ^2.0.17
board_build.filesystem = littlefs
board_build.partitions = tools/ESP32_4MB_1MB_FS.csv
monitor_filters = 
    esp32_exception_decoder
    time
    log2file
extra_scripts = 
    pre:tools/minify.py

[platformio]
default_envs = esp32dev-st7735-debug

[env:esp32dev-st7735-debug]
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DLOGGER_ENABLED=1
    -DLOGGER_LEVEL_ERROR=1
    -DLOGGER_LEVEL_WARN=1
    -DLOGGER_LEVEL_INFO=1
    -DLOGGER_LEVEL_DEBUG=0
    -DLOGGER_LEVEL_VERBOSE=0
    -DDISPLAY_TYPE_ST7735
    -DDUAL_DISPLAY_ENABLED
    ; Working TFT configuration
    -DUSER_SETUP_LOADED=1
    -DST7735_DRIVER
    -DST7735_GREENTAB160x80
    -DTFT_WIDTH=80
    -DTFT_HEIGHT=160
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=23
    -DTFT_SCLK=18
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=27000000

[env:esp32dev-st7735-production]
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DLOGGER_ENABLED=0
    -DDISPLAY_TYPE_ST7735
    -DDUAL_DISPLAY_ENABLED
    ; Working TFT configuration
    -DUSER_SETUP_LOADED=1
    -DST7735_DRIVER
    -DST7735_GREENTAB160x80
    -DTFT_WIDTH=80
    -DTFT_HEIGHT=160
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=23
    -DTFT_SCLK=18
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=27000000

; ST7789 Display Configuration (240x240)
[env:esp32dev-st7789-debug]
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DLOGGER_ENABLED=1
    -DLOGGER_LEVEL_ERROR=1
    -DLOGGER_LEVEL_WARN=1
    -DLOGGER_LEVEL_INFO=1
    -DLOGGER_LEVEL_DEBUG=0
    -DLOGGER_LEVEL_VERBOSE=0
    -DDISPLAY_TYPE_ST7789
    -DDUAL_DISPLAY_ENABLED
    ; ST7789 TFT configuration
    -DUSER_SETUP_LOADED=1
    -DST7789_DRIVER
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=240
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=23
    -DTFT_SCLK=18
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=27000000

[env:esp32dev-st7789-production]
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DLOGGER_ENABLED=0
    -DDISPLAY_TYPE_ST7789
    -DDUAL_DISPLAY_ENABLED
    ; ST7789 TFT configuration
    -DUSER_SETUP_LOADED=1
    -DST7789_DRIVER
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=240
    -DTFT_RGB_ORDER=TFT_BGR  
    -DTFT_RST=4  
    -DTFT_DC=14
    -DTFT_MOSI=23
    -DTFT_SCLK=18
    -DTOUCH_CS=-1
    -DLOAD_GLCD   
    -DLOAD_FONT2  
    -DLOAD_FONT4  
    -DLOAD_FONT6  
    -DLOAD_FONT7  
    -DLOAD_FONT8  
    -DLOAD_GFXFF
    -DSMOOTH_FONT
    -DSPI_FREQUENCY=27000000

