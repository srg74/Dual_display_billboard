[env]
platform = espressif32
framework = arduino
lib_deps = 
  bodmer/TFT_eSPI @ ^2.5.43 ; -> Displays library
  esphome/ESPAsyncWebServer-esphome @ ^3.4.0
  esphome/ESPAsyncTCP-esphome @ ^2.0.0
  bodmer/TJpg_Decoder @ ^1.1.0
  mrrwa/NmraDcc @ ^2.0.17

[platformio]
default_envs = esp32dev

[env:esp32dev]
platform = espressif32
board = wemos_d1_mini32
framework = arduino
monitor_speed = 115200
lib_deps = 
    esphome/ESPAsyncWebServer-esphome
    esphome/ESPAsyncTCP-esphome
build_flags = 
    -DCORE_DEBUG_LEVEL=1
    -DBOARD_HAS_PSRAM=1
    -DLOGGER_ENABLED=1           ; Enable/disable all logging
    -DLOGGER_LEVEL_ERROR=1       ; Error messages
    -DLOGGER_LEVEL_WARN=1        ; Warning messages  
    -DLOGGER_LEVEL_INFO=1        ; Info messages
    -DLOGGER_LEVEL_DEBUG=1       ; Debug messages
    -DLOGGER_LEVEL_VERBOSE=0     ; Verbose debug messages
monitor_filters = esp32_exception_decoder
# Build process
extra_scripts = 
    pre:tools/minify.py

# Production build (minimal logging) - DON'T inherit build_flags
[env:esp32dev-production]
platform = espressif32
board = wemos_d1_mini32
framework = arduino
monitor_speed = 115200
lib_deps = 
    esphome/ESPAsyncWebServer-esphome
    esphome/ESPAsyncTCP-esphome
build_flags = 
    -DCORE_DEBUG_LEVEL=1
    -DBOARD_HAS_PSRAM=1
    -DLOGGER_ENABLED=1           ; Keep basic logging
    -DLOGGER_LEVEL_ERROR=1       ; Error messages only
    -DLOGGER_LEVEL_WARN=0        ; No warnings
    -DLOGGER_LEVEL_INFO=0        ; No info
    -DLOGGER_LEVEL_DEBUG=0       ; No debug
    -DLOGGER_LEVEL_VERBOSE=0     ; No verbose
monitor_filters = esp32_exception_decoder
extra_scripts = 
    pre:tools/minify.py

# Silent build (no logging) - DON'T inherit build_flags
[env:esp32dev-silent]
platform = espressif32
board = wemos_d1_mini32
framework = arduino
monitor_speed = 115200
lib_deps = 
    esphome/ESPAsyncWebServer-esphome
    esphome/ESPAsyncTCP-esphome
build_flags = 
    -DCORE_DEBUG_LEVEL=1
    -DBOARD_HAS_PSRAM=1
    -DLOGGER_ENABLED=0           ; Disable all logging
    -DLOGGER_LEVEL_ERROR=0       ; No errors
    -DLOGGER_LEVEL_WARN=0        ; No warnings
    -DLOGGER_LEVEL_INFO=0        ; No info
    -DLOGGER_LEVEL_DEBUG=0       ; No debug
    -DLOGGER_LEVEL_VERBOSE=0     ; No verbose
monitor_filters = esp32_exception_decoder
extra_scripts = 
    pre:tools/minify.py